# 更新日志

记录霓虹小行星项目的版本变更和重要更新。

---

## [v0.2.2] - 2025-11-06

### ✨ 新增

- **爆炸粒子系统** - 敌人死亡时的霓虹粒子特效
  - 三种爆炸预设：小型、普通、大型
  - 每种敌人可独立配置爆炸效果
  - 粒子继承敌人颜色
  - 支持圆点和线段两种粒子类型
  - 敌人撞击玩家死亡时也会播放爆炸特效
- **玩家受击动效** - 玩家被撞时绿色箭头部分边闪白
  - 与敌人相同的霓虹闪烁效果
  - 5条边随机闪白
  - 持续 0.08 秒
- **血量显示 UI** - 顶部显示玩家血量条
  - 血量 > 50%：绿色
  - 血量 25-50%：橙色
  - 血量 < 25%：红色（警告）
- **Game Over 系统** - 玩家死亡时
  - 显示 Game Over 界面
  - 显示重新开始按钮
  - 点击按钮重新加载游戏
- **绝对跟随操作模式** - 移动端触摸操作改进
  - 飞机追随手指位置移动
  - 飞机位于手指上方 80px，不遮挡视野
  - 更直观的触摸控制体验
- **EnemyData 组件** - 存储敌人配置ID
- **Particle 组件** - 粒子生命周期管理
- **ParticleSystem** - 粒子更新和淡出

### 🔧 修复

- **粒子尺寸优化** - 缩小粒子至 1.5-3 像素
- **爆炸范围调整** - 速度降低至 150-300，更紧凑
- **碰撞逻辑优化** - 敌人撞玩家通过 DAMAGE 事件触发死亡（确保播放特效）

### 📖 文档

- 创建 particleConfig.ts 配置文件
- 在 enemies.json 中添加 deathEffect 配置
- 更新 EnemyConfig 类型定义

---

## [v0.2.1] - 2025-11-06

### 🔧 修复

- **修复所有硬编码尺寸问题** - 全面应用 SCALE_FACTOR 到所有相关参数
  - 拾取距离、边界限制、清理范围
  - 虚拟摇杆尺寸、触摸灵敏度
- **修复 EnemySpawnSystem 使用废弃方法** - 改为使用配置驱动的创建方法
- **修复移动端长宽比变形** - 添加自适应画布缩放，保持 9:16 比例
- **修复敌人受击变形 Bug** - HitFlash 组件保存形状和尺寸信息

### ✨ 新增

- **全局尺寸放大 30%** - 所有游戏物体（玩家、敌人、子弹）放大，UI 文字不变
- **AI 行为初始化** - AISystem 自动初始化 AI 状态，支持 ZigzagBehavior
- **移动端局域网访问** - 配置 Vite 允许局域网内设备访问

### 🗑️ 删除

- 删除废弃方法 `createEnemy()` 和 `EnemyType` 枚举
- 删除废弃方法 `createPlayerBullet()`
- 清理未使用的导入

### 📖 文档

- 更新 ARCHITECTURE.md 系统执行顺序，添加 AISystem 和 ProjectileSystem
- 整合历史文档到 `docs/history/`
- 创建本更新日志

---

## [v0.2.0] - 2025-11-06

### 🎉 重大更新：数据驱动架构

### ✨ 新增

#### 配置系统
- **DataLoader** - 配置加载和管理系统
- **类型定义** - EnemyConfig, WeaponConfig, PlayerConfig
- **JSON 配置文件** - 敌人、武器、角色配置化

#### AI 行为系统
- **AI 组件** - 可配置的 AI 行为
- **3 种基础行为**:
  - `straight_down` - 直线向下
  - `zigzag` - 蛇形摆动
  - `tracking` - 追踪玩家（3种速度变种）
- **AISystem** - 插件化 AI 行为管理

#### 武器系统增强
- **Projectile 组件** - 子弹属性（穿透、弹跳、追踪）
- **ProjectileSystem** - 子弹行为系统
- **穿透支持** - 子弹可穿透多个敌人
- **弹跳支持** - 子弹碰到边界弹跳
- **追踪导弹** - 子弹可追踪敌人

### 📖 文档

- **ARCHITECTURE.md** (250+ 行) - 架构设计详解
- **DATA_CONFIG.md** (200+ 行) - 配置完整手册
- **DEVELOPER_GUIDE.md** (300+ 行) - 开发实战指南
- **CONFIG_EXAMPLES.md** (400+ 行) - 配置示例集合

### 🔄 重构

- 敌人系统完全配置化
- 武器系统完全配置化
- 玩家系统完全配置化
- 实体工厂使用配置驱动

---

## [v0.1.0] - 2025-11-06

### 🎉 MVP 版本发布

### ✨ 功能

#### 核心架构
- **ECS 架构** - Entity/Component/System/World
- **事件总线** - 系统间解耦通信
- **游戏引擎** - PixiJS + 自研 ECS

#### 美术渲染
- **霓虹线框** - ShapeFactory + NeonRenderer
- **辉光效果** - 简化版，移动端友好
- **几何形状** - 六边形、三角形、箭头、圆形
- **星空背景** - 噪点效果

#### 游戏玩法
- **玩家系统** - 绿色箭头飞船
- **移动控制** - WASD/方向键 + 虚拟摇杆
- **自动射击** - 白色子弹
- **敌人系统** - 六边形（慢速）+ 三角形（快速）
- **碰撞检测** - 圆形碰撞
- **经验系统** - 磁吸拾取 + 升级
- **受击反馈** - 部分边闪白效果

#### UI/UX
- **顶部 HUD** - 等级、经验条、计时器、FPS
- **虚拟摇杆** - 移动端触摸控制
- **响应式布局** - 适配各种屏幕

#### 性能优化
- **对象池系统** - 复用对象减少 GC
- **实体限制** - 敌人 ≤30，子弹 ≤50
- **屏幕外清理** - 自动清理超出边界实体
- **简化渲染** - 移动端友好的辉光实现

### 📖 文档
- README.md - 项目概览
- QUICKSTART.md - 快速开始指南

---

## 版本号规范

采用语义化版本：`主版本.次版本.修订号`

- **主版本** (v1.0.0)：重大架构变更或破坏性改动
- **次版本** (v0.2.0)：新功能、系统添加
- **修订号** (v0.2.1)：Bug 修复、小优化

---

## 图例

- 🎉 重大更新
- ✨ 新增功能
- 🔧 Bug 修复
- 🔄 重构
- 📖 文档
- 🗑️ 删除
- ⚡ 性能优化
- 🎨 UI/美术

