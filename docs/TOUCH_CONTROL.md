# 触摸操作系统说明

## 🎮 操作模式

### PC 端 - 键盘控制
- **WASD / 方向键**：移动
- **速度**：恒定最大速度（280 像素/秒）

### 移动端 - 相对拖动模式（触摸板风格）

**工作原理**：
- 手指在屏幕上滑动多少，飞机就移动多少
- 类似 MacBook 触摸板的体验
- 可以在屏幕任意位置操作，不遮挡视野

**特点**：
- ✅ 手指不遮挡飞机
- ✅ 精确控制
- ✅ 速度受限（与 PC 相同）
- ✅ 灵敏度可调

---

## ⚙️ 灵敏度配置

### 在配置文件中调整

**文件**：`public/data/players/players.json`

```json
{
  "id": "fighter_alpha",
  "touchSensitivity": 5.0
}
```

### 灵敏度参数说明

| 数值 | 效果 | 适用场景 |
|------|------|----------|
| 3.0 | 低灵敏度 | 需要精确走位 |
| 5.0 | 默认灵敏度 | 平衡 ✅ |
| 7.0 | 高灵敏度 | 快速移动 |
| 10.0 | 很高灵敏度 | 激进玩法 |

**建议**：从 5.0 开始，根据手感调整

---

## 🔧 技术实现

### 输入计算流程

```typescript
// 1. 检测手指滑动距离
const dx = 当前触摸位置.x - 上一帧触摸位置.x;
const dy = 当前触摸位置.y - 上一帧触摸位置.y;

// 2. 应用灵敏度
vx = dx × touchSensitivity;
vy = dy × touchSensitivity;

// 3. 限制最大速度
if (速度 > PLAYER_SPEED) {
  速度 = PLAYER_SPEED;  // 280 像素/秒
}

// 4. 应用到飞机
velocity.vx = vx;
velocity.vy = vy;
```

### 速度限制

无论是键盘还是触摸，最大速度都是：
- **baseSpeed**: 280 像素/秒（配置文件中定义）
- **可升级**：未来可以通过升级卡提升

---

## 🎯 操作技巧

### 移动端

1. **慢速移动**：手指缓慢滑动
2. **快速移动**：手指快速滑动（最快达到 280 px/s）
3. **精确走位**：小幅度滑动
4. **停止移动**：手指停止或抬起

### PC 端

1. **方向移动**：按住 WASD
2. **速度恒定**：280 像素/秒
3. **对角线**：同时按两个方向键

---

## 📊 参数对比

### 键盘 vs 触摸

| 特性 | 键盘 | 触摸 |
|------|------|------|
| 输入方式 | 方向键 | 手指滑动 |
| 速度控制 | 恒定最大速度 | 滑动速度控制 |
| 最大速度 | 280 px/s | 280 px/s |
| 精确度 | 8方向 | 360度全方向 |
| 灵敏度 | 固定 | 可调（touchSensitivity）|

---

## 🔧 调试技巧

### 测试触摸灵敏度

在浏览器控制台：
```javascript
// 查看当前灵敏度
console.log(inputSystem.getTouchSensitivity());

// 临时调整灵敏度（不保存）
inputSystem.setTouchSensitivity(7.0);
```

### 永久调整灵敏度

1. 编辑 `public/data/players/players.json`
2. 修改 `touchSensitivity` 值
3. 刷新浏览器

---

## 🎨 UI 显示

### 虚拟摇杆

相对拖动模式下**不显示虚拟摇杆**，因为：
- 不需要可视化反馈
- 手指可以在任意位置操作
- 更简洁的界面

---

## 🚀 未来扩展

### 可添加的功能

1. **游戏内灵敏度设置**
   - UI 滑块调整
   - 实时生效

2. **惯性滑动**
   - 手指抬起后继续滑动一小段
   - 更流畅的手感

3. **加速度曲线**
   - 滑动越快，加速越快
   - 模拟真实物理

---

## 📝 调整建议

### 如果感觉太灵敏

降低 `touchSensitivity`：
```json
"touchSensitivity": 3.0  // 从 5.0 降到 3.0
```

### 如果感觉太迟钝

提高 `touchSensitivity`：
```json
"touchSensitivity": 7.0  // 从 5.0 升到 7.0
```

### 如果想要更快的速度

提高 `baseSpeed`（影响键盘和触摸）：
```json
"baseSpeed": 350  // 从 280 升到 350
```

---

**提示**：移动端操作需要适应期，建议先尝试几局，找到适合自己的灵敏度！

