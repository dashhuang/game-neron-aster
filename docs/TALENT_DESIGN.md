# 天赋树设计文档

本文档用于规划和讨论天赋系统的内容设计，包括节点效果、资源分配、拓扑结构等。

---

## 资源体系

### 核心能量（青色 0x43d9ff）
- **获取方式**：游戏内经验在结算时转化（通关/死亡都计入）
- **用途**：激活和升级大部分普通天赋
- **特点**：日常可刷，数量充足，主流通货币
- **设计目标**：让玩家有持续的成长感，每次游戏都能积累进度

### 时间棱晶（紫色 0xc49bff）
- **获取方式**：特定成就、挑战奖励
- **用途**：激活玩法改变型天赋（新机制、新武器、新系统）
- **特点**：相对稀缺，解锁新体验
- **设计目标**：重要决策点，改变游戏玩法

### 星级点数（金色 0xffd166）
- **获取方式**：通关关卡、完成特定挑战（不可反复刷）
- **用途**：仅用于升级战舰核心
- **特点**：成就型货币，稀缺
- **设计目标**：关卡解锁进度的门槛

### 王冠令牌（青绿 0x4de3a1）
- **获取方式**：待定
- **用途**：待定（终极天赋/特殊机制）
- **特点**：最稀有
- **设计目标**：后续扩展保留

---

## 天赋节点设计

### 【核心系统】

#### 战舰核心（CORE）
- **资源**：星级点数（金色）
- **消耗**：每级 1 点
- **最大等级**：10
- **效果**：
  - Lv1-3：解锁世界 1-3 关卡
  - Lv4-6：解锁世界 4-6 关卡 + 挑战模式
  - Lv7-9：解锁困难难度 + Boss Rush
  - Lv10：解锁无尽模式 + 最终挑战
- **位置**：中心
- **连接**：4个系别母节点

---

### 【普通天赋 - 核心能量（青色）】

采用**母节点+子节点**树形结构：
- 母节点：系别的核心基础属性，多级升级
- 子节点：该系的专精分支，从母节点延伸

---

#### 一、进攻系（Attack）

##### 母节点：基础伤害提升（ATK）
- **消耗**：每级递增（50/100/150/250/400/600/900/1300/1800/2500）
- **最大等级**：10
- **效果**：每级伤害 +5%（累计最高 +50%）
- **位置**：战舰核心上方偏左
- **连接下游**：暴击、穿透、射速、弹速

##### 子节点 1：暴击系统（CRIT）
- **前置**：基础伤害 Lv1+
- **消耗**：每级 100/250/500/800/1200
- **最大等级**：5
- **效果**：
  - Lv1: 暴击率 +5%，暴击伤害 150%
  - Lv2: 暴击率 +8%，暴击伤害 160%
  - Lv3: 暴击率 +12%，暴击伤害 175%
  - Lv4: 暴击率 +15%，暴击伤害 200%
  - Lv5: 暴击触发连锁（30%概率额外判定）

##### 子节点 2：穿透强化（PIERCE）
- **前置**：基础伤害 Lv1+
- **消耗**：每级 150/350/700
- **最大等级**：3
- **效果**：
  - Lv1: 穿透 +1
  - Lv2: 穿透 +2
  - Lv3: 穿透 +3，穿透伤害不衰减

##### 子节点 3：射速增幅（SPEED）
- **前置**：基础伤害 Lv1+
- **消耗**：每级 80/180/400
- **最大等级**：3
- **效果**：
  - Lv1: 射速 +12%
  - Lv2: 射速 +18%
  - Lv3: 射速 +30%

##### 子节点 4：弹速优化（VELOCITY）
- **前置**：射速增幅 Lv1+
- **消耗**：每级 90/220
- **最大等级**：2
- **效果**：
  - Lv1: 弹速 +30%
  - Lv2: 弹速 +50%

##### 子节点 5：巨弹化（SIZE）
- **前置**：穿透强化 Lv1+
- **消耗**：每级 120/280/600
- **最大等级**：3
- **效果**：
  - Lv1: 子弹尺寸 +35%
  - Lv2: 子弹尺寸 +60%
  - Lv3: 子弹尺寸 +100%，命中小范围溅射

---

#### 二、防御/生存系（Defense）

##### 母节点：基础生命提升（HP）
- **消耗**：每级递增（50/100/150/250/400/600/900/1300/1800/2500）
- **最大等级**：10
- **效果**：每级生命 +10（累计最高 +100）
- **位置**：战舰核心右侧
- **连接下游**：护盾、减伤、恢复

##### 子节点 1：护盾系统（SHIELD）
- **前置**：基础生命 Lv1+
- **消耗**：每级 100/250/500/900
- **最大等级**：4
- **效果**：
  - Lv1: 护盾上限 +30
  - Lv2: 护盾上限 +60，恢复速度 +25%
  - Lv3: 护盾上限 +100，受击2秒后开始恢复
  - Lv4: 护盾破碎时释放冲击波

##### 子节点 2：伤害减免（ARMOR）
- **前置**：基础生命 Lv1+
- **消耗**：每级 120/300/650
- **最大等级**：3
- **效果**：
  - Lv1: 受伤 -8%
  - Lv2: 受伤 -15%
  - Lv3: 受伤 -25%，低血量额外 -15%

##### 子节点 3：生命恢复（REGEN）
- **前置**：基础生命 Lv3+
- **消耗**：每级 150/350
- **最大等级**：2
- **效果**：
  - Lv1: 每5秒恢复3点生命
  - Lv2: 每3秒恢复6点生命

---

#### 三、成长/资源系（Growth）

##### 母节点：基础经验加成（XP）
- **消耗**：每级递增（40/80/120/200/320/500/750/1100/1600/2300）
- **最大等级**：10
- **效果**：每级经验获取 +8%（累计最高 +80%）
- **位置**：战舰核心下方偏左
- **连接下游**：磁吸范围、磁吸速度、拾取奖励、升级效率

##### 子节点 1：磁吸范围（MAG-R）
- **前置**：基础经验 Lv1+
- **消耗**：每级 80/180/400/800
- **最大等级**：4
- **效果**：
  - Lv1: 磁吸范围 +35%
  - Lv2: 磁吸范围 +60%
  - Lv3: 磁吸范围 +100%
  - Lv4: 磁吸范围 +150%

##### 子节点 2：磁吸速度（MAG-S）
- **前置**：磁吸范围 Lv1+
- **消耗**：每级 70/160/380
- **最大等级**：3
- **效果**：
  - Lv1: 磁吸速度 +50%
  - Lv2: 磁吸速度 +100%
  - Lv3: 磁吸经验瞬移到身边

##### 子节点 3：拾取奖励（LOOT）
- **前置**：基础经验 Lv1+
- **消耗**：每级 90/200/450
- **最大等级**：3
- **效果**：
  - Lv1: 拾取经验价值 +12%
  - Lv2: 拾取经验价值 +25%，掉落率 +8%
  - Lv3: 拾取经验价值 +40%，稀有掉落率 +15%

##### 子节点 4：升级效率（CHOICE）
- **前置**：基础经验 Lv3+
- **消耗**：每级 200/450
- **最大等级**：2
- **效果**：
  - Lv1: 升级时 +1 选项（4选1）
  - Lv2: 升级时 +2 选项（5选1）

---

#### 四、机动系（Mobility）

##### 母节点：基础移速提升（MOVE）
- **消耗**：每级递增（40/80/120/200/320/500/750/1100/1600/2300）
- **最大等级**：10
- **效果**：每级移速 +4%（累计最高 +40%）
- **位置**：战舰核心下方偏右
- **连接下游**：闪避、灵活

##### 子节点 1：闪避训练（EVADE）
- **前置**：基础移速 Lv1+
- **消耗**：每级 180/400/800
- **最大等级**：3
- **效果**：
  - Lv1: 受击后0.5秒无敌（CD 12秒）
  - Lv2: 受击后0.8秒无敌（CD 9秒）
  - Lv3: 受击后1.2秒无敌（CD 6秒），清除弹幕

##### 子节点 2：灵活机动（AGILE）
- **前置**：基础移速 Lv3+
- **消耗**：每级 100/250
- **最大等级**：2
- **效果**：
  - Lv1: 移动时碰撞判定 -10%
  - Lv2: 移动时碰撞判定 -20%，加速启动更快

---

### 【特殊玩法天赋 - 时间棱晶（紫色）】

#### 武器/攻击类

##### 18. 导弹系统
- **短标签**：MSLE
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：解锁导弹武器升级选项，追踪敌人，AOE爆炸
- **说明**：激活后，局内升级池会出现"导弹"相关升级卡

##### 19. 激光武器
- **短标签**：LASER
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：解锁激光武器升级选项，持续伤害光束
- **说明**：激活后，局内升级池会出现"激光"相关升级卡

##### 20. 散弹系统
- **短标签**：SHOT
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：解锁散弹武器升级选项，扇形近距离高伤
- **说明**：激活后，局内升级池会出现"散弹"相关升级卡

##### 21. 弹射强化
- **短标签**：CHAIN
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：解锁弹射机制，子弹击中后跳向附近敌人
- **说明**：激活后，局内升级池会出现"弹射"相关升级卡

##### 22. 轨道卫星
- **短标签**：ORBIT
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：解锁轨道卫星武器，环绕玩家旋转并发射
- **说明**：激活后，局内升级池会出现"轨道"相关升级卡

#### 防御/辅助类

##### 23. 能量护盾
- **短标签**：ESHLD
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：解锁能量护盾系统，可充能的额外防护层
- **说明**：激活后可在局内升级护盾容量与充能速度

##### 24. 自动拾取
- **短标签**：AUTO
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：全屏自动拾取，经验自动飞向玩家
- **说明**：替代磁吸机制，不再需要靠近

##### 25. 时间减速
- **短标签**：SLOW
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：解锁主动技能"时间减速"，短时间减慢游戏速度
- **说明**：按键触发，CD 60秒，持续3秒

##### 26. 僚机支援
- **短标签**：DRONE
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：解锁僚机系统，1-2架小型僚机跟随射击
- **说明**：局内可升级僚机数量、伤害、射速

##### 27. 伤害光环
- **短标签**：AURA
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：解锁伤害光环，范围内敌人持续受到伤害
- **说明**：局内可升级光环范围与DPS

##### 28. 反伤护甲
- **短标签**：THORN
- **消耗**：1 时间棱晶
- **最大等级**：1
- **效果**：受击时对攻击者造成反伤（受伤值的30%）
- **说明**：局内可升级反伤比例与触发概率

---

### 【终极天赋 - 王冠令牌（青绿）】（待设计）

##### 29. 复活机制
- **短标签**：REVIVE
- **消耗**：待定
- **效果**：死亡后原地复活一次

##### 30. 炸弹系统
- **短标签**：BOMB
- **消耗**：待定
- **效果**：解锁炸弹主动技能，清空屏幕敌人

##### 31. 时间停止
- **短标签**：STOP
- **消耗**：待定
- **效果**：暂停所有敌人5秒，玩家可自由行动

---

## 天赋树拓扑结构

### 当前布局（辐射型）

```
                战舰核心（中心）
                /  |  |  |  \
            进攻 防御 成长 机动 功能(待补)
           /     |     |     |     
         深度   深度  深度  深度
```

### 分支设计

#### 进攻系分支
```
战舰核心 → 基础伤害
         ↓
        射速增幅 → 暴击系统
         ↓           ↓
        穿透强化   弹速优化
         ↓
        巨弹化
```

#### 防御系分支
```
战舰核心 → 生命强化
         ↓
        护盾系统 → 伤害减免
                   ↓
                 生命恢复
```

#### 成长系分支
```
战舰核心 → 经验加成
         ↓
        磁吸范围 → 磁吸速度
         ↓           ↓
       拾取奖励   升级效率
```

#### 机动系分支
```
战舰核心 → 移速提升
         ↓
        闪避训练
```

---

## 待讨论问题

### 1. 节点总数
- 当前规划：约17个普通天赋 + 10个特殊天赋 + 3个终极天赋 = **30个节点**
- 是否需要调整？

### 2. 分支深度
- 当前：每个系别 3-5 层
- 是否需要更深或更浅？

### 3. 特殊天赋位置
- **方案A**：分散在各系终端（需要解锁前置普通天赋）
  - 例如：进攻系终端放"导弹解锁"
- **方案B**：独立成第6分支，从核心直连
- **方案C**：混合模式
- 你倾向哪种？

### 4. 资源消耗平衡
- 核心能量：50-700 不等
- 时间棱晶：每个特殊天赋 1 个
- 星级点数：战舰核心专用
- 是否合理？

### 5. 效果数值
- 当前百分比加成范围：8%-100%
- 是否需要调整力度？

### 6. 缺失内容
- 当前没有"功能系"（CDR、buff持续时间等）
- 是否需要补充？

---

## 下一步

请基于以上内容给我你的反馈：
- 哪些天赋需要调整/删除/新增？
- 资源分配是否合理？
- 拓扑结构是否符合预期？
- 数值力度是否合适？

我会根据你的反馈直接修改这个文档，直到我们把内容定稿，然后再一次性实现到代码中。

